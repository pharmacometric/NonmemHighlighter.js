<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NONMEM Highlighter</title>
  <script src="NonmemHighlighter.js"></script>
</head>
<body>

<h2>NONMEM Code Example</h2>

<div id="editor">
  <pre><code>
$PROBLEM 1 CMT ORAL DOSING
$DATA data.csv IGNORE=@
$INPUT ID TIME AMT DV EVID MDV CMT
$SUBROUTINES ADVAN2 TRANS2
$PK
; Full relationships
CL = TVCL*(WT/73.10)**0.75*EXP(ETA(1))  ; Median Weight
V2 = TVV2*(WT/73.10)**1.0*EXP(ETA(2))
Q  = TVQ*(WT/73.10)**0.75*EXP(ETA(3))
KA = TVKA*EXP(ETA(4))
V3 = TVV3*(WT/73.10)**1.0*EXP(ETA(5))
ALAG1= TVALAG*EXP(ETA(6))
F1 = TVF1*EXP(ETA(7))

; #### rate constants ####
K20 = CL/V2
K23 = Q/V2
K32 = Q/V3
S2 = V2/1000

$ERROR
  IPRED = LOG(.0025)
  IF(F.GT.0) IPRED = LOG(F)
  IRES  = IPRED-DV
  IWRES = IRES/W
  Y     = IPRED+ERR(1)*W

$THETA  (0,39.5527) ; 1 CL
$THETA  (0,21.0651) ; 2 V1
$THETA  (0,8.66472) ; 3 K0
$THETA  (0,52.6265) ; 4 V2
$THETA  (0,61.5643) ; 5 V2
$THETA  (0,8.404399) ; 6 Q
$THETA  (0,0.251992) ; 7 ALAG
$THETA  (0,1) FIX ; 8 F1
$THETA  (0,1) ; CLRACE
$THETA  (0,1) ; CLSEX
$THETA  (0,1) ; VRACE
$THETA  (0,1) ; VSEX
$THETA  (0,1) ; FISEX
$THETA  (0,1) ; FIRACE
$OMEGA  BLOCK(2)
 0.101796
 0.0983332 1.25485  ; IIV (CL-V)
  </code></pre>
</div>

<button onclick="toggleTheme()">Toggle Theme</button>

<script>
  const highlighter = new NonmemHighlighter({ theme: 'light', lineNumbers: true });
  highlighter.highlightElement("#editor code");

  function toggleTheme() {
    const newTheme = highlighter.theme === 'dark' ? 'light' : 'dark';
    highlighter.setTheme(newTheme);
    highlighter.highlightElement("#editor code");
  }
</script>

</body>
</html>
